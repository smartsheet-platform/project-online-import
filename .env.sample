# sdlc SDLC Environment Variables
# Copy this file to .env: cp .env.sample .env

# GitLab Token (required for MR feedback processing and creation)
# Get your personal access token from Smartsheet GitLab:
# https://git.lab.smartsheet.com/-/profile/personal_access_tokens
# Required scopes: api, read_repository, write_repository
GIT_TOKEN=

# GitLab Configuration (required for GitLab MR creation and API operations)
GITLAB_API_URL=https://git.lab.smartsheet.com/api/v4
GITLAB_PROJECT_ID=

# Jira Project Key (required if using Jira integration)
# This is the project key for your Jira board (e.g., JBS, MYPROJ, etc.)
# Find it in your Jira project URL or project settings
JIRA_PROJECT_KEY=

# Atlassian MCP Server Configuration
JIRA_URL=https://smartsheet.atlassian.net
JIRA_USERNAME=
JIRA_API_TOKEN=

CONFLUENCE_URL=https://smar-wiki.atlassian.net/
CONFLUENCE_USERNAME=
CONFLUENCE_API_TOKEN=

# Jira Integration (optional - for automated task discovery and status updates)
# The SDLC includes built-in Jira integration via Atlassian MCP server
#
# SETUP INSTRUCTIONS FOR TEAM:
#
# Step 1: Install Atlassian MCP from Roo Code Marketplace
#   - Open Roo settings: Cmd+Shift+P → "Roo: Open MCP Settings"
#   - Click "Add Server" or "Browse Marketplace"
#   - Search for "Atlassian" and install
#
# Step 2: Get Your Jira API Token
#   - Go to: https://id.atlassian.com/manage-profile/security/api-tokens
#   - Click "Create API token"
#   - Name it "SDLC MCP Integration"
#   - Copy the token for next step
#
# Step 3: Configure the Atlassian MCP Server with these values:
#
#   JIRA_URL: https://smartsheet.atlassian.net
#   JIRA_USERNAME: your-email@smartsheet.com
#   JIRA_API_TOKEN: [paste your token from Step 2]
#
#   CONFLUENCE_URL: https://smar-wiki.atlassian.net/
#   CONFLUENCE_USERNAME: your-email@smartsheet.com
#   CONFLUENCE_API_TOKEN: [same token from Step 2]
#
# Step 4: Reload VSCode
#   - Cmd+Shift+P → "Developer: Reload Window"
#
# YOUR JIRA PROJECT:
# - Project Key: TO_BE_FILLED
# - Project Name: TO_BE_FILLED
# - Instance: https://smartsheet.atlassian.net
# - Issue Types: Task, Story, Epic, Bug, Initiative
# - Statuses: Open, Backlog, Selected for Development, In Progress, In Review, Production Ready, Closed
#
# ORCHESTRATOR WORKFLOWS:
# - "What's next?" queries automatically discover tasks from Jira project JBS
# - Task assignment and status updates happen via MCP tools
# - Git branch naming uses Jira issue keys (e.g., personal/username/JBS-001-task-name)
# - JQL queries filter tasks by assignment and status

# ============================================================================
# Project Online to Smartsheet ETL Configuration
# ============================================================================

# Smartsheet Configuration (required)
# ─────────────────────────────────────────────────────────────────────────
# Get your API token from: https://app.smartsheet.com/account/apps
# Required scopes: READ_SHEETS, WRITE_SHEETS, CREATE_SHEETS, DELETE_SHEETS
SMARTSHEET_API_TOKEN=

# Smartsheet API Host (optional)
# Select the appropriate regional endpoint based on your account location:
# - North America: https://api.smartsheet.com/2.0/ (default)
# - Europe: https://api.smartsheet.eu/2.0/
# - Australia: https://api.smartsheet.au/2.0/
SMARTSHEET_API_HOST=

# PMO Standards Workspace ID (optional)
# If you have an existing PMO Standards workspace, specify its ID here
# to reuse it across imports. Otherwise, a new workspace will be created.
PMO_STANDARDS_WORKSPACE_ID=

# Template Workspace ID (optional)
# Workspace ID used as template for creating new project workspaces
# The template should contain pre-configured sheets with all columns defined
# If not specified, blank workspaces will be created from scratch
# Example: TEMPLATE_WORKSPACE_ID=9002412817049476
TEMPLATE_WORKSPACE_ID=

# Solution Type (optional)
# Controls workspace creation strategy
# Options: StandaloneWorkspaces (default), Portfolio
# - StandaloneWorkspaces: Creates independent PMO Standards and project workspaces
# - Portfolio: Creates workspaces within a portfolio structure (future implementation)
# SOLUTION_TYPE=StandaloneWorkspaces

# Project Online Configuration (required for extraction)
# ─────────────────────────────────────────────────────────────────────────
# Azure AD Tenant ID (find in Azure Portal → Azure Active Directory → Overview)
TENANT_ID=

# Azure AD Application (Client) ID
# Create app registration at: https://portal.azure.com → Azure Active Directory
# → App registrations → New registration
CLIENT_ID=

# Project Online Site URL
# Format: https://[tenant].sharepoint.com/sites/[site-name]
# Example: https://contoso.sharepoint.com/sites/pwa
PROJECT_ONLINE_URL=

# Azure AD App Registration Setup Instructions (Device Code Flow):
# ─────────────────────────────────────────────────────────────────────────
# This tool uses Device Code Flow authentication with delegated permissions.
# You will authenticate interactively when running the tool for the first time.
# Your authentication token will be cached for future use.
#
# 1. Go to: https://portal.azure.com → Azure Active Directory
# 2. Navigate to: App registrations → New registration
# 3. Name: "Project Online ETL Tool"
# 4. Supported account types: "Accounts in this organizational directory only"
# 5. Redirect URI: Leave blank
# 6. Click "Register"
#
# 7. Copy the following from the Overview page:
#    - Application (client) ID → CLIENT_ID
#    - Directory (tenant) ID → TENANT_ID
#
# 8. Enable Public Client Flows:
#    - Go to: Authentication
#    - Under "Advanced settings" → "Allow public client flows"
#    - Set to: YES
#    - Click "Save"
#
# 9. Grant Delegated Permissions:
#    - Go to: API permissions → Add a permission
#    - Select: SharePoint → Delegated permissions
#    - Check: AllSites.Read and AllSites.Write
#    - Click: Add permissions
#    - Note: User consent will be handled during first authentication
#
# 10. Test your configuration:
#     npm run dev validate -- --source [project-id]
#     (You will be prompted to authenticate via browser on first run)

# API Retry Configuration (optional)
# ─────────────────────────────────────────────────────────────────────────
# Configure exponential backoff retry behavior for API calls
# These settings apply to both Project Online OData API and Smartsheet API
#
# Maximum number of retry attempts for failed API calls (default: 5)
# Increase for flaky networks, decrease for faster failure detection
RETRY_MAX_RETRIES=5
#
# Initial delay in milliseconds before first retry (default: 1000)
# Each subsequent retry doubles the delay (exponential backoff)
# Example: 1000ms → 2000ms → 4000ms → 8000ms → 16000ms
RETRY_INITIAL_DELAY_MS=1000

# Add your project's specific environment variables below
# (The SDLC works with just GIT_TOKEN - other variables are optional)